{"version":3,"sources":["assets/scripts/loginscene/loginScene.js"],"names":["cc","Class","Component","properties","wait_node","Node","onLoad","isopen_sound","audioEngine","play","url","raw","myglobal","socket","initSocket","start","onButtonCilck","event","customData","console","log","request_wxLogin","uniqueID","playerData","accountID","nickName","avatarUrl","err","result","JSON","stringify","gobal_count","goldcount","director","loadScene","bind"],"mappings":";;;;;;AAAA;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACTC,IAAAA,SAAS,EAACJ,EAAE,CAACK;AADJ,GAHP;AAOL;AAEAC,EAAAA,MATK,oBASK;AACN;AACA,QAAGC,YAAH,EAAgB;AACZP,MAAAA,EAAE,CAACQ,WAAH,CAAeC,IAAf,CAAoBT,EAAE,CAACU,GAAH,CAAOC,GAAP,CAAW,8BAAX,CAApB,EAA+D,IAA/D;AACF;;AAEDC,yBAASC,MAAT,CAAgBC,UAAhB;AACJ,GAhBI;AAkBLC,EAAAA,KAlBK,mBAkBI,CACR,CAnBI;AAqBLC,EAAAA,aArBK,yBAqBSC,KArBT,EAqBeC,UArBf,EAqB0B;AAC3B,YAAOA,UAAP;AACI,WAAK,UAAL;AACIC,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADJ,CAGI;;AAEAR,6BAASC,MAAT,CAAgBQ,eAAhB,CAAgC;AAC5BC,UAAAA,QAAQ,EAACV,qBAASW,UAAT,CAAoBD,QADD;AAE5BE,UAAAA,SAAS,EAACZ,qBAASW,UAAT,CAAoBC,SAFF;AAG5BC,UAAAA,QAAQ,EAACb,qBAASW,UAAT,CAAoBE,QAHD;AAI5BC,UAAAA,SAAS,EAACd,qBAASW,UAAT,CAAoBG;AAJF,SAAhC,EAKE,UAASC,GAAT,EAAaC,MAAb,EAAoB;AAClB;AACA;AACA;AACA,cAAGD,GAAG,IAAE,CAAR,EAAU;AACPR,YAAAA,OAAO,CAACC,GAAR,CAAY,SAAOO,GAAnB;AACA;AACF;;AAEDR,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiBS,IAAI,CAACC,SAAL,CAAeF,MAAf,CAA7B;AACAhB,+BAASW,UAAT,CAAoBQ,WAApB,GAAkCH,MAAM,CAACI,SAAzC;AACAhC,UAAAA,EAAE,CAACiC,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AACH,SAZC,CAYAC,IAZA,CAYK,IAZL,CALF;;AAkBA;;AACJ;AACI;AA1BR;AA4BH,GAlDI,CAmDL;;AAnDK,CAAT","sourceRoot":"/","sourcesContent":["import myglobal from \"../mygolbal.js\"\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n       wait_node:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        //console.log(\"qian_state.qian:\"+ qian_state.qian)\n        if(isopen_sound){\n            cc.audioEngine.play(cc.url.raw(\"resources/sound/login_bg.ogg\"),true) \n         }\n           \n         myglobal.socket.initSocket()\n    },\n    \n    start () {\n    },\n    \n    onButtonCilck(event,customData){\n        switch(customData){\n            case \"wx_login\":\n                console.log(\"wx_login request\")\n                \n                //this.wait_node.active = true\n                \n                myglobal.socket.request_wxLogin({\n                    uniqueID:myglobal.playerData.uniqueID,\n                    accountID:myglobal.playerData.accountID,\n                    nickName:myglobal.playerData.nickName,\n                    avatarUrl:myglobal.playerData.avatarUrl,\n                },function(err,result){\n                    //请求返回\n                    //先隐藏等待UI\n                    //this.wait_node.active = false\n                    if(err!=0){\n                       console.log(\"err:\"+err)\n                       return     \n                    }\n\n                    console.log(\"login sucess\" + JSON.stringify(result))\n                    myglobal.playerData.gobal_count = result.goldcount\n                    cc.director.loadScene(\"hallScene\")\n                }.bind(this))\n                break\n            default:\n                break\n        }\n    }\n    // update (dt) {},\n\n\n});\n"]}