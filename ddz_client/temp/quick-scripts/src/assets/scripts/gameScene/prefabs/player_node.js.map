{"version":3,"sources":["assets/scripts/gameScene/prefabs/player_node.js"],"names":["cc","Class","Component","properties","account_label","Label","nickname_label","room_touxiang","Sprite","globalcount_label","headimage","readyimage","Node","offlineimage","card_node","card_prefab","Prefab","clockimage","qiangdidzhu_node","time_label","robimage_sp","SpriteFrame","robnoimage_sp","robIconSp","robIcon_Sp","robnoIcon_Sp","masterIcon","onLoad","active","node","on","event","bind","console","log","accountid","myglobal","playerData","accountID","pushCard","detail","state","qian_state","qian","buqiang","start","funUp2","now","next_time","string","unschedule","updateGold","infolist","i","length","goldcount","init_data","data","index","JSON","stringify","accountId","nick_name","seatindex","cardlist_node","seat_index","isready","isonline","str","avatarUrl","head_image_path","loader","loadRes","err","spriteFrame","message","_accountID","schedule","onCardWatting","x","card","instantiate","scale","parent","name","height","y","push","funUp3","onOffLine","onOnLine"],"mappings":"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","sourceRoot":"/","sourcesContent":["import myglobal from \"../../mygolbal.js\"\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        account_label:cc.Label,\n        nickname_label:cc.Label,\n        room_touxiang:cc.Sprite,\n        globalcount_label:cc.Label,\n        headimage:cc.Sprite,\n        readyimage:cc.Node,\n        offlineimage:cc.Node,\n        card_node:cc.Node,\n        card_prefab:cc.Prefab,\n        //tips_label:cc.Label,\n        clockimage:cc.Node,\n        qiangdidzhu_node:cc.Node, //抢地主的父节点\n        time_label:cc.Label,\n        robimage_sp:cc.SpriteFrame,\n        robnoimage_sp:cc.SpriteFrame,\n        robIconSp: cc.Sprite,\n        robIcon_Sp:cc.Node,\n        robnoIcon_Sp:cc.Node,\n        masterIcon:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n      this.readyimage.active = false\n      this.offlineimage.active = false\n      \n      //监听开始游戏事件(客户端发给客户端)\n      this.node.on(\"gamestart_event\",function(event){\n        this.readyimage.active = false\n      }.bind(this))\n\n      //给其他玩家发牌事件\n      this.node.on(\"push_card_event\",function(event){\n        console.log(\"on push_card_event\")\n        //自己不再发牌\n        if(this.accountid==myglobal.playerData.accountID){\n            return\n        }\n        this.pushCard()\n      }.bind(this))\n\n      this.node.on(\"playernode_rob_state_event\",function(event){\n          //{\"accountid\":\"2162866\",\"state\":1}\n          var detail = event\n      \n          //如果是自己在抢，需要隐藏qiangdidzhu_node节点\n          //this.accountid表示这个节点挂接的accountid\n          if(detail.accountid==this.accountid){\n            //console.log(\"detail.accountid\"+detail.accountid)\n            this.qiangdidzhu_node.active = true\n              \n          }\n\n          if(this.accountid == detail.accountid){\n            if(detail.state==qian_state.qian){\n              console.log(\"this.robIcon_Sp.active = true\")\n              this.robIcon_Sp.active = true\n\n            }else if(detail.state==qian_state.buqiang){\n              this.robnoIcon_Sp.active = true\n             \n            }else{\n              console.log(\"get rob value :\"+detail.state)\n            }\n\t\t\t\n\t\t\t//this.qiangdidzhu_node.active = false\n\t\t\t\n\t\t\t\n          }\n         \n      }.bind(this))\n\n      this.node.on(\"playernode_changemaster_event\",function(event){\n         var detail = event \n         this.robIcon_Sp.active = false\n         this.robnoIcon_Sp.active = false\n         if(detail==this.accountid){\n            this.masterIcon.active = true\n          }\n      }.bind(this))\n\n      // this.node.on(\"playernode_add_three_card\",function(event){\n      //   var detail = event //地主的accountid\n      //   if(detail==this.accountid){\n      //     //给地主发三张排\n\n      //   }\n      // }.bind(this))\n    },\n\n    start () {\n        \n    },\n\t funUp2 (){\n\t\tthis.now++;\n\t\tif(this.next_time-this.now>0){\n\t\t\tthis.time_label.string=\"\"+(this.next_time-this.now);\n\t\t\t//this.schedule(funUp,1)\n\t\t}else{\n\t\t\t this.unschedule(this.funUp2)\n\t\t}\n\t},\n    updateGold(infolist){\n\t\tfor(var i=0;i<infolist.length;i++){\n\t\t\tif(infolist[i].accountID==this.accountid){\n\t\t\t\tthis.globalcount_label.string=infolist[i].goldcount\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t},\n\t\n\n    //这里初始化房间内位置节点信息(自己和其他玩家)\n    //data玩家节点数据\n    //index玩家在房间的位置索引\n    init_data(data,index){\n      console.log(\"init_data:\"+JSON.stringify(data))  \n      //data:{\"accountid\":\"2117836\",\"nick_name\":\"tiny543\",\"avatarUrl\":\"http://xxx\",\"goldcount\":1000}\n      this.accountid = data.accountid\n\t  this.accountId=data.accountid\n      this.account_label.string = data.accountid\n      this.nickname_label.string = data.nick_name +\" s \"+ data.seatindex +\" i\"+index\n      this.globalcount_label.string = data.goldcount\n      this.cardlist_node = []\n      this.seat_index = index\n      if(data.isready==true){\n        this.readyimage.active = true\n      }\n\t   this.offlineimage.active=false \n\t  if(typeof(data.isonline)!=\"undefined\" && data.isonline==false){\n\t\t   this.offlineimage.active=true \n\t  }\n     \n      //网络图片加载\n    //     cc.loader.load({url: data.avatarUrl, type: 'jpg'},  (err, tex)=> {\n    //     //cc.log('Should load a texture from RESTful API by specify the type: ' + (tex instanceof cc.Texture2D));\n    //     let oldWidth = this.headImage.node.width;\n    //     //console.log('old withd' + oldWidth);\n    //     this.room_touxiang.spriteFrame = new cc.SpriteFrame(tex);\n    //     let newWidth = this.headImage.node.width;\n    //     //console.log('old withd' + newWidth);\n    //     this.headImage.node.scale = oldWidth / newWidth;\n    // });\n    //这里根据传入的avarter来获取本地图像\n    var str = data.avatarUrl\n    //console.log(str)\n    var head_image_path = \"UI/headimage/\" + str\n    cc.loader.loadRes(head_image_path,cc.SpriteFrame,function(err,spriteFrame) {\n        if (err) {\n            console.log(err.message || err);\n            return;\n        }          \n         this.headimage.spriteFrame = spriteFrame;        \n        }.bind(this));\n\n    //注册一个player_ready消息\n    this.node.on(\"player_ready_notify\",function(event){\n        console.log(\"player_ready_notify event\",event)\n            var detail = event\n            console.log(\"------player_ready_notify detail:\"+detail)\n            if(detail==this.accountid){\n                this.readyimage.active = true\n            }\n        }.bind(this))\n\n        //监听内部随可以抢地主消息,这个消息会发给每个playernode节点\n        this.node.on(\"playernode_canrob_event\",function(event){\n            var detail = event\n            console.log(\"------playernode_canrob_event detail:\"+detail)\n\t\t\t this.unschedule(this.funUp2)\n            if(detail._accountID==this.accountid){\n              this.qiangdidzhu_node.active=true\n              //this.tips_label.string =\"正在抢地主\" \n             // this.time_label.string=\"10\"\n              //开启一个定时器\n\t\t\t  // var now=detail.next_time-detail.now;\n\t\t\t  this.next_time=detail.next_time;\n\t\t\t  this.now=detail.now;\n\t\t\tthis.time_label.string=\"\"+(this.next_time-this.now);\n\t\t\t// let funUp2 = function(){\n\t\t\t// \tthis.now++;\n\t\t\t// \tif(this.next_time-this.now>0){\n\t\t\t// \t\tthis.time_label.string=\"\"+(this.next_time-this.now);\n\t\t\t// \t\t//this.schedule(funUp,1)\n\t\t\t// \t}else{\n\t\t\t// \t\t// this.unschedule(funUp)\n\t\t\t// \t}\n\t\t\t// }.bind(this);\n\t\t    \n\t\t\t this.schedule(this.funUp2, 1);\n            \n\t\t\t}else{\n\t\t\t\t this.qiangdidzhu_node.active=false\n\t\t\t}\n\t\t\t\n        }.bind(this))\n\t\tthis.node.on(\"onCanChuCard_playernode\",function(data){\n\t\t\tconsole.log(\"收到通知 等待用户出牌 \"+data);\n\t\t\tthis.onCardWatting(data);\n\t\t}.bind(this));\n        //?\n        if(index==1){\n          this.card_node.x = -this.card_node.x - 30\n        }\n    },\n\n    // update (dt) {},\n    pushCard(){\n        \n        this.card_node.active = true \n        for(var i=0;i<17;i++){\n            var card = cc.instantiate(this.card_prefab)\n            card.scale=0.6\n            console.log(\" this.card_node.parent.parent\"+ this.card_node.parent.parent.name)\n            card.parent = this.card_node\n            //card.parent = this.node\n            var height = card.height\n            card.y = (17 - 1) * 0.5 * height * 0.4 * 0.3 - height * 0.4 * 0.3 * i;\n            card.x = 0\n           \n            //console.log(\"call pushCard x:\"+card.x+\" y:\"+card.y)\n            this.cardlist_node.push(card)\n        }\n    },\n\tfunUp3(){\n\t\t\tthis.now++;\n\t\t\tif(this.next_time-this.now>0){\n\t\t\t\t\n\t\t\t\tthis.time_label.string=\"\"+(this.next_time-this.now);\n\t\t\t\t//this.schedule(funUp,1)\n\t\t\t}else{\n\t\t\t\tthis.qiangdidzhu_node.active = false;\n\t\t\t\tthis.unschedule(this.funUp3);\n\t\t\t}\n\t},\n\tonCardWatting(data){\n\t\tconsole.log(\"等待 出牌:\",data._accountID)\n\t\tthis.unschedule(this.funUp3);\n\t\t\n\t\tif(this.accountid==data._accountID){\n\t\t    this.qiangdidzhu_node.active = true;\n\t\t}\n\t\telse{\n\t\t\tthis.qiangdidzhu_node.active = false;\n\t\t}\n\t\tif( this.accountid!=data._accountID){\n\t\t\treturn ;\n\t\t}\n\t\t//var now=data.next_time-data.now;\n\t\tthis.next_time=data.next_time;\n\t\tthis.now=data.now;\n\t\tthis.time_label.string=\"\"+data.next_time-data.now;;\n\t\t// let funUp3 = function(){\n\t\t// \tthis.now++;\n\t\t// \tif(this.next_time-this.now>0){\n\t\t\t\t\n\t\t// \t\tthis.time_label.string=\"\"+(this.next_time-this.now);\n\t\t// \t\t//this.schedule(funUp,1)\n\t\t// \t}else{\n\t\t// \t\tthis.qiangdidzhu_node.active = false;\n\t\t// \t\tthis.unschedule(this.funUp3);\n\t\t// \t}\n\t\t// }.bind(this);\n\t\t // this.schedule(funUp, 1);\n\t\t this.schedule(this.funUp3,1);\n\t\t \n\t\n\t\t// this.schedule(function(){\n\t\t// \tdata.now+=1000;\n\t\t// \tif(data.next_time-data.now>0){\n\t\t// \t\tthis.time_label.string=\"\"+(data.next_time-data.now)/1000;\n\t\t// \t}\n\t\t// }.bind(this),1);\n\t\t//等待某人出牌\n\t},\n\tonOffLine(){\n\t\tconsole.log(\"  掉线了 \"+this.accountid); \n\t\tthis.offlineimage.active=true\n\t},\n\tonOnLine(){\n\t\tconsole.log(\"  上线了 \"+this.accountid); \n\t\tthis.offlineimage.active=false\n\t}\n\t\n});\n"]}