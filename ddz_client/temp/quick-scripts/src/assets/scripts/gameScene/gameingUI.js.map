{"version":3,"sources":["assets/scripts/gameScene/gameingUI.js"],"names":["cc","Class","Component","properties","gameingUI","Node","card_prefab","Prefab","robUI","bottom_card_pos_node","playingUI_node","tipsLabel","Label","mypaiview","returnroom","clock_label","playing_clock_label","ResetUI","Toast","show","myglobal","socket","requestReady","ResetUI_","cards_nods","card_width","rob_player_accountid","fapai_end","bottom_card","bottom_card_data","choose_card_data","outcar_zone","push_card_tmp","active","unscheduleAllCallbacks","gameScene_script","node","parent","getComponent","i","playerNodeList","length","getChildByName","removeAllChildren","clearOutZone","accountid","gamebefore_node","emit","show_mycards","data","card_data","cur_index_card","pushCard","isopen_sound","scheduleOnce","_runactive_pushcard","bind","show_bottom_cards","card","show_data","call_data","console","log","JSON","stringify","run","callFunc","target","activedata","show_card","obj","showCards","runAction","sequence","rotateBy","scaleBy","audioEngine","play","url","raw","now_whocan_chupai","unschedule","funUp1","_accountID","playerData","accountID","string","next_time","now","schedule","show_chupai","outCard_node","getUserOutCardPosByAccount","node_cards","cards","instantiate","push","appendOtherCardsToOutZone","funUp","onLoad","onPushCards","onCanRobState","onCanChuCard","onGameFinish","Alert","you_dt_score","onOtherPlayerChuCard","on","master_accountid","pushThreeCard","event","detail","cardid","splice","start","stop","fapai_audioID","sendevent","move_node","newx","x","action","moveTo","v2","sortCard","sort","y","a","b","hasOwnProperty","value","king","timeout","setTimeout","zIndex","width","scale","di_card","position","schedulePushThreeCard","last_card_x","destoryCard","choose_card","destroy_card","j","card_id","removeFromParent","appendCardsToOutZone","updateCards","children","destroy","pushCardSort","yoffset","addChild","zPoint","cardNode","getChildren","setScale","setPosition","zeroPoint","playPushCardSound","card_name","CardsValue","one","name","onButtonClick","customData","requestRobState","qian_state","qian","buqiang","request_buchu_card","request_chu_card","err","msg","cardvalue","account"],"mappings":"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","sourceRoot":"/","sourcesContent":["import myglobal from \"../mygolbal.js\"\nimport socketctr from \"../data/socket_ctr.js\"\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        gameingUI: cc.Node,\n        card_prefab:cc.Prefab,\n        robUI:cc.Node,\n        bottom_card_pos_node:cc.Node,\n        playingUI_node:cc.Node,\n        tipsLabel:cc.Label, //玩家出牌不合法的tips\n        mypaiview:cc.Node  ,\n\t\treturnroom:cc.Node,\n\t\tclock_label:cc.Label,\n\t\tplaying_clock_label:cc.Label\n\t\t\n    },\n    ResetUI(){//测试按钮\n\t\n\t Toast.show(\"测试按钮\"); \n\t myglobal.socket.requestReady()\n\t//myglobal.socket._socket.close();\n\t //    myglobal.socket.request_reset(function(data){\n\t\t// \tconsole.log(\"重置游戏 返回\"+data);\n\t\t// \t//this.ResetUI_();\n\t\t// }.bind(this))\t\n\t},\n\t\n\tResetUI_(){\n\t\t//自己牌列表\n\t\tthis.cards_nods = []\n\t\tthis.card_width = 0\n\t\t//当前可以抢地主的accountid\n\t\tthis.rob_player_accountid = 0\n\t\t//发牌动画是否结束\n\t\tthis.fapai_end = false\n\t\t//底牌数组\n\t\tthis.bottom_card = []\n\t\t//底牌的json对象数据\n\t\tthis.bottom_card_data=[]\n\t\tthis.choose_card_data=[]\n\t\tthis.outcar_zone = []\n\t\t\n\t\tthis.push_card_tmp = []\n\t\t\n\t\t//this.robUI.removeAllChildren();\n\t\t this.robUI.active= false;\n\t\t this.playingUI_node.active=false;\n\t\t//cc.director.loadScene(\"gameScene\")\n\t\t\n\t\t//先清理出牌区域\n\t\t\n\t\tthis.unscheduleAllCallbacks()//清除所有定时器\n\t\t\n\t\tvar gameScene_script = this.node.parent.getComponent(\"gameScene\")\n\t\tfor(var i=0;i< gameScene_script.playerNodeList.length;i++){\n\t\t\tgameScene_script.playerNodeList[i].getChildByName(\"card_node\").removeAllChildren(true);\n\t\t\t//gameScene_script.playerNodeList[i].unscheduleAllCallbacks()//清除所有定时器\n\t\t\tthis.clearOutZone(gameScene_script.playerNodeList[i].getComponent(\"player_node\").accountid)\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tthis.bottom_card_pos_node.removeAllChildren(true);\n\t\tthis.mypaiview.removeAllChildren(true);\n\t\t\n\t\t// var gamebefore_node = this.node.parent.getChildByName(\"gamebeforeUI\")\n\t\t// if(gameScene_script.roomstate<RoomState.ROOM_GAMESTART){//游戏中\n\t\t//     gamebefore_node.active=true;\n\t\t// \tgamebefore_node.emit(\"init\")\n\t\t// }\n\t\t// else{\n\t\t//     gamebefore_node.active =  false\n\t\t// }\n\t\tvar gamebefore_node = this.node.parent.getChildByName(\"gamebeforeUI\")\n\t\tgamebefore_node.active=true;\n\t\tgamebefore_node.emit(\"init\")\n\t\t\n\t\t\n\t},\n\t\n\tshow_mycards(data){//显示我的手牌\n\t   this.card_data = data\n\t   this.cur_index_card = data.length - 1\n\t   this.pushCard(data)\n\t   if(isopen_sound){\n\t    //循环播放发牌音效\n\t       //this.fapai_audioID = cc.audioEngine.play(cc.url.raw(\"resources/sound/fapai1.mp3\"),true)\n\t       // console.log(\"start fapai_audioID\"+this.fapai_audioID) \n\t    }\n\t //左边移动定时器\n\t    this.scheduleOnce(this._runactive_pushcard.bind(this),0.3)\n\t    this.node.parent.emit(\"pushcard_other_event\")\t\n\t},\n\tshow_bottom_cards(data){//显示地主牌\n\t\t\n\t\tthis.bottom_card_data = data\n\t\t\n\t\tfor(var i=0;i<data.length;i++){\n\t\t    var card = this.bottom_card[i]\n\t\t    var show_data = data[i]\n\t\t    var call_data = {\n\t\t        \"obj\":card,\n\t\t        \"data\":show_data,\n\t\t    }\n\t\t    console.log(\"bottom show_data:\"+JSON.stringify(show_data))\n\t\t    var run =  cc.callFunc(function(target,activedata){\n\t\t       \n\t\t        var show_card = activedata.obj\n\t\t        var show_data = activedata.data\n\t\t        //console.log(\"cc.callFunc:\"+JSON.stringify(show_data))\n\t\t        show_card.getComponent(\"card\").showCards(show_data)\n\t\t       \n\t\t    },this,call_data)\n\t\t\n\t\t    card.runAction(cc.sequence(cc.rotateBy(0,0,180),cc.rotateBy(0.2,0,-90), run,\n\t\t    cc.rotateBy(0.2,0,-90),cc.scaleBy(1, 1.2)));\n\t\t   \n\t\t    if(isopen_sound){\n\t\t        cc.audioEngine.play(cc.url.raw(\"resources/sound/start.mp3\")) \n\t\t     }\n\t\t}\n\t\t\n\t},\n\t\n\tnow_whocan_chupai(data){// 现在谁出牌\n\t\tthis.unschedule(this.funUp1);\n\t\t\n\t\tif(data._accountID==myglobal.playerData.accountID){\n\t\t\t//显示可以出牌的UI\n\t\t\tthis.playingUI_node.active = true\n\t\t    //先清理出牌区域\n\t\t    this.clearOutZone(myglobal.playerData.accountID)\n\t\t    //先把自己出牌列表置空\n\t\t    //this.choose_card_data=[]\n\t\t\t\n\t\t\tthis.playing_clock_label.string=\"\"+(data.next_time-data.now);\n\t\t\tthis.next_time= data.next_time\n\t\t\tthis.now=data.now;\n\t\t\t// let funUp1 = function(){\n\t\t\t// \tthis.now+=1;\n\t\t\t// \tif(this.next_time-this.now>0){\n\t\t\t// \t\tthis.playing_clock_label.string=\"\"+(this.next_time-this.now);\n\t\t\t\t\n\t\t\t// \t}else{\n\t\t\t// \t\tthis.playingUI_node.active = false\n\t\t\t// \t\t//this.unschedule(funUp);\n\t\t\t// \t}\n\t\t\t// }.bind(this);\n\t\t\t// this.unschedule(this.funUp1);\n\t\t\t this.schedule(this.funUp1,1);\n\t\t}else{\n\t\t\t//隐藏可以出牌的UI\n\t\t\tthis.playingUI_node.active = false\n\t\t}\n\t\t\n\t\tthis.node.parent.emit(\"onCanChuCard_gameScene\",data);\n\t\t\n\t\t\n\t},\n\tshow_chupai(data){// 显示玩家出牌\n\t\tvar accountid = data.accountid\n\t\tvar gameScene_script = this.node.parent.getComponent(\"gameScene\")\n\t\t//获取出牌区域节点\n\t\tvar outCard_node = gameScene_script.getUserOutCardPosByAccount(accountid)\n\t\tif(outCard_node==null){\n\t\t    return\n\t\t}\n\t\t\n\t\tvar node_cards = []\n\t\tfor(var i=0;i<data.cards.length;i++){\n\t\t    var card = cc.instantiate(this.card_prefab)\n\t\t    card.getComponent(\"card\").showCards(data.cards[i].card_data,myglobal.playerData.accountID)\n\t\t    node_cards.push(card)\n\t\t}\n\t\tthis.appendOtherCardsToOutZone(outCard_node,node_cards,0)\n\t},\n\tfunUp (){\n\t\t\t\t\tthis.now++;\n\t\t\t\t\tif(this.next_time-this.now>=0){\n\t\t\t\t\t\tthis.clock_label.string=\"\"+(this.next_time-this.now);\n\t\t\t\t\t\t//this.scheduleOnce(funUp,1) \n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.robUI.active = false\n\t\t\t\t\t     this.unschedule(this.funUp);\n\t\t\t\t\t}\n\t},\n\tfunUp1(){\n\t\tthis.now+=1;\n\t\tif(this.next_time-this.now>0){\n\t\t\tthis.playing_clock_label.string=\"\"+(this.next_time-this.now);\n\t\t\n\t\t}else{\n\t\t\tthis.playingUI_node.active = false\n\t\t\tthis.unschedule(this.funUp1);\n\t\t}\n\t},\n    onLoad () {\n        //自己牌列表 \n        // this.cards_nods = []\n        // this.card_width = 0\n        // //当前可以抢地主的accountid\n        // this.rob_player_accountid = 0\n        // //发牌动画是否结束\n        // this.fapai_end = false\n        // //底牌数组\n        // this.bottom_card = []\n        // //底牌的json对象数据\n        // this.bottom_card_data=[]\n        // this.choose_card_data=[]\n        // this.outcar_zone = []\n\n        // this.push_card_tmp = []\n\t\tthis.ResetUI_();\n        //监听服务器:下发牌消息\n        myglobal.socket.onPushCards(function(data){\n            console.log(\"onPushCards\"+JSON.stringify(data))\n\t\t\tthis.show_mycards(data)\n            // this.card_data = data\n            // this.cur_index_card = data.length - 1\n            // this.pushCard(data)\n            // if(isopen_sound){\n            //     //循环播放发牌音效\n            //    // this.fapai_audioID = cc.audioEngine.play(cc.url.raw(\"resources/sound/fapai1.mp3\"),true)\n            //     console.log(\"start fapai_audioID\"+this.fapai_audioID) \n            // }\n            //  //左边移动定时器\n            // this.scheduleOnce(this._runactive_pushcard.bind(this),0.3)\n            // this.node.parent.emit(\"pushcard_other_event\")\n           \n        }.bind(this))\n\n        //监听服务器:通知抢地主消息,显示相应的UI\n        myglobal.socket.onCanRobState(function(data){\n            console.log(\"onCanRobState\"+JSON.stringify(data))\n            //这里需要2个变量条件：自己是下一个抢地主，2发牌动画结束\n            this.rob_player_accountid = data._accountID\n           // if(data._accountID==myglobal.playerData.accountID && this.fapai_end==true){\n\t\t    if(data._accountID==myglobal.playerData.accountID ){\n\t\t\t\t\n                this.robUI.active = true\n\t\t\t\t\n\t\t\t\tthis.clock_label.string=\"\"+(data.next_time-data.now);\n\t\t\t\tthis.next_time= data.next_time;\n\t\t\t\tthis.now=data.now;\n\t\t\t\t// let funUp = function(){\n\t\t\t\t// \tdata.now++;\n\t\t\t\t// \tif(data.next_time-data.now>=0){\n\t\t\t\t// \t\tthis.clock_label.string=\"\"+(data.next_time-data.now);\n\t\t\t\t// \t\t//this.scheduleOnce(funUp,1) \n\t\t\t\t// \t}else{\n\t\t\t\t// \t\tthis.robUI.active = false\n\t\t\t\t// \t\t//this.unschedule(funUp);\n\t\t\t\t// \t}\n\t\t\t\t// }.bind(this);\n\t\t\t\tthis.unschedule(this.funUp);\n\t\t\t\t this.schedule(this.funUp, 1);\n\n            }else{\n\t\t\t\tthis.robUI.active = false\n\t\t\t}\n\t\t\tthis.node.parent.emit(\"canrob_event\",data);\n\t\t\t\n          \n        }.bind(this))\n        \n        //监听服务器可以出牌消息\n        myglobal.socket.onCanChuCard(function(data){\n            console.log(\"onCanChuCard gameingUI\"+JSON.stringify(data))\n\t\t\tconsole.log(\"\")\n\t\t\t\n\t\t\tthis.now_whocan_chupai(data)\n            //判断是不是自己能出牌\n   //          if(data._accountID==myglobal.playerData.accountID){\n\t\t\t// \t//显示可以出牌的UI\n\t\t\t// \tthis.playingUI_node.active = true\n   //              //先清理出牌区域\n   //              this.clearOutZone(myglobal.playerData.accountID)\n   //              //先把自己出牌列表置空\n   //              //this.choose_card_data=[]\n                \n   \n\t\t\t\t\n\t\t\t// \tthis.playing_clock_label.string=\"\"+(data.next_time-data.now);\n\t\t\t// \tlet funUp = function(){\n\t\t\t// \t\tdata.now+=1;\n\t\t\t// \t\tif(data.next_time-data.now>0){\n\t\t\t// \t\t\tthis.playing_clock_label.string=\"\"+(data.next_time-data.now);\n\t\t\t\t\t\n\t\t\t// \t\t}else{\n\t\t\t// \t\t\tthis.playingUI_node.active = false\n\t\t\t\t\t\t\n\t\t\t// \t\t\t//this.unschedule(funUp);\n\t\t\t// \t\t}\n\t\t\t// \t}.bind(this);\n\t\t\t// \t this.schedule(funUp,1,(data.next_time-data.now));\n\t\t\t// }else{\n\t\t\t// \t//隐藏可以出牌的UI\n\t\t\t// \tthis.playingUI_node.active = false\n\t\t\t// }\n\t\t\t\n\t\t\t// this.node.parent.emit(\"onCanChuCard_gameScene\",data);\n\t\t\t\n\t\t\t\n        }.bind(this))\n\n        myglobal.socket.onGameFinish(function(data){\n        \tconsole.log(\"游戏结束通知 onGameFinish:\"+data);\n        \t//this.tipsLabel.string=\"winner\"+data;\n\t\t\n\t\t\t\n\t\t\t\t Alert.show(\"You \"+(data.you_dt_score>0?\"win\":\"lose\")+\" \"+data.you_dt_score)\n\t\t\t\n\t\t\t\n\t\t\t// if(data.winner==myglobal.playerData.accountID){\n\t\t\t//      Alert.show(\"You win \"+data.you_dt_score)\n\t\t\t// }else{\n\t\t\t\t //Toast.show(\"You dt \"+data.you_dt_score)\n\t\t\t// }\n\t\t\t\n\t\t\t//this.gameingUI.active = true;\n\t\t\tthis.ResetUI_()\n\t\t\t//cc.director.loadScene(\"gameScene\")\n\t\t\t\n        }.bind(this));  \n\n\n        //监听服务器：其他玩家出牌消息\n        myglobal.socket.onOtherPlayerChuCard(function(data){\n            //{\"accountid\":\"2357540\",\"cards\":[{\"cardid\":4,\"card_data\":{\"index\":4,\"value\":1,\"shape\":1}}]}\n            console.log(\"onOtherPlayerChuCard\"+JSON.stringify(data))\n\n            this.show_chupai(data);\n            // var accountid = data.accountid\n            // var gameScene_script = this.node.parent.getComponent(\"gameScene\")\n            // //获取出牌区域节点\n            // var outCard_node = gameScene_script.getUserOutCardPosByAccount(accountid)\n            // if(outCard_node==null){\n            //     return\n            // }\n\n            // var node_cards = []\n            // for(var i=0;i<data.cards.length;i++){\n            //     var card = cc.instantiate(this.card_prefab)\n            //     card.getComponent(\"card\").showCards(data.cards[i].card_data,myglobal.playerData.accountID)\n            //     node_cards.push(card)\n            // }\n            // this.appendOtherCardsToOutZone(outCard_node,node_cards,0)\n\n            \n        }.bind(this))\n\n        //内部事件:显示底牌事件,data是三张底牌数据\n        this.node.on(\"show_bottom_card_event\",function(data){\n            console.log(\"----show_bottom_card_event\",+data)\n          \n\t\t   this.show_bottom_cards(data); \n            // this.bottom_card_data = data\n            \n            // for(var i=0;i<data.length;i++){\n            //     var card = this.bottom_card[i]\n            //     var show_data = data[i]\n            //     var call_data = {\n            //         \"obj\":card,\n            //         \"data\":show_data,\n            //     }\n            //     console.log(\"bottom show_data:\"+JSON.stringify(show_data))\n            //     var run =  cc.callFunc(function(target,activedata){\n                   \n            //         var show_card = activedata.obj\n            //         var show_data = activedata.data\n            //         //console.log(\"cc.callFunc:\"+JSON.stringify(show_data))\n            //         show_card.getComponent(\"card\").showCards(show_data)\n                   \n            //     },this,call_data)\n\n            //     card.runAction(cc.sequence(cc.rotateBy(0,0,180),cc.rotateBy(0.2,0,-90), run,\n            //     cc.rotateBy(0.2,0,-90),cc.scaleBy(1, 1.2)));\n               \n            //     if(isopen_sound){\n            //         cc.audioEngine.play(cc.url.raw(\"resources/sound/start.mp3\")) \n            //      }\n            // }\n\n            //this.node.parent.emit(\"change_room_state_event\",RoomState.ROOM_PLAYING)\n            //如果自己地主，给加上三张底牌\n            if(myglobal.playerData.accountID==myglobal.playerData.master_accountid){\n                this.scheduleOnce(this.pushThreeCard.bind(this),0.2)\n            }\n            \n              \n        }.bind(this))\n\n        //注册监听一个选择牌消息 \n        this.node.on(\"choose_card_event\",function(event){\n            console.log(\"choose_card_event:\"+JSON.stringify(event))\n            var detail = event\n            this.choose_card_data.push(detail)\n        }.bind(this))\n\n        this.node.on(\"unchoose_card_event\",function(event){\n            console.log(\"unchoose_card_event:\"+ event)\n            var detail = event\n            for(var i=0;i<this.choose_card_data.length;i++){\n                if(this.choose_card_data[i].cardid==detail){\n                    this.choose_card_data.splice(i,1)\n                }\n            }\n        }.bind(this))\n\n    },\n\n    start () {\n     \n    },\n\n    //处理发牌的效果\n    _runactive_pushcard(){\n        //console.log(\"_runactive_pushcard:\"+this.cur_index_card)\n        if(this.cur_index_card < 0){\n            console.log(\"pushcard end\")\n            //发牌动画完成，显示抢地主按钮\n            //this.robUI.active = true\n            this.fapai_end = true\n            if(this.rob_player_accountid==myglobal.playerData.accountID){\n                this.robUI.active = true\n            }\n\n            if(isopen_sound){\n                //console.log(\"start fapai_audioID\"+this.fapai_audioID) \n                cc.audioEngine.stop(this.fapai_audioID)\n            }\n           \n\n              //通知gamescene节点，倒计时\n            var sendevent = this.rob_player_accountid\n            //this.node.parent.emit(\"canrob_event\",sendevent)\n\n            return\n        }\n\n        //原有逻辑  \n        // var move_node = this.cards_nods[this.cur_index_card]\n        // move_node.active = true\n        // var newx = move_node.x + (this.card_width * 0.4*this.cur_index_card) - (this.card_width * 0.4)\n        // var action = cc.moveTo(0.1, cc.v2(newx, -250));\n        // move_node.runAction(action)\n        // this.cur_index_card--\n        // this.scheduleOnce(this._runactive_pushcard.bind(this),0.3)\n\n       // this.cur_index_card=0;\n        var move_node = this.cards_nods[this.cards_nods.length-this.cur_index_card-1]\n\t\tif(move_node==null)return\n        move_node.active = true\n        this.push_card_tmp.push(move_node)\n\t    if(isopen_sound)\n        this.fapai_audioID = cc.audioEngine.play(cc.url.raw(\"resources/sound/fapai1.mp3\"))\n        for(var i=0;i<this.push_card_tmp.length-1;i++){\n                var move_node = this.push_card_tmp[i]\n                var newx = move_node.x - (this.card_width * 0.4)\n                var action = cc.moveTo(0.1, cc.v2(newx, -250));\n                move_node.runAction(action)\n        }\n        \n        this.cur_index_card--\n\t\t// this._runactive_pushcard.bind(this);\n        this.scheduleOnce(this._runactive_pushcard.bind(this),0.03)\n    },\n \n    //对牌排序\n    sortCard(){\n        this.cards_nods.sort(function(x,y){\n            var a = x.getComponent(\"card\").card_data;\n            var b = y.getComponent(\"card\").card_data;\n\n            if (a.hasOwnProperty('value') && b.hasOwnProperty('value')) {\n                return  b.value-a.value;\n            }\n            if (a.hasOwnProperty('king') && !b.hasOwnProperty('king')) {\n                return -1;\n            }\n            if (!a.hasOwnProperty('king') && b.hasOwnProperty('king')) {\n                return 1;\n            }\n            if (a.hasOwnProperty('king') && b.hasOwnProperty('king')) {\n                return  b.king-a.king;\n            }\n        })\n        //var x = this.cards_nods[0].x;\n        //这里使用固定坐标，因为取this.cards_nods[0].xk可能排序为完成，导致x错误\n        //所以做1000毫秒的延时\n        var timeout = 1000\n        setTimeout(function(){\n            //var x = -417.6 \n            var x = this.cards_nods[0].x;\n            console.log(\"sort x:\"+ x)\n            for (let i = 0; i < this.cards_nods.length; i++) {\n                var card = this.cards_nods[i];\n                card.zIndex = i; //设置牌的叠加次序,zindex越大显示在上面\n                card.x = x + card.width * 0.4 * i;\n            }\n        }.bind(this), timeout);\n        \n       \n    },\n\n  \n    pushCard(data){//发牌 \n    if (data) {\n            data.sort(function (a, b) {\n                if (a.hasOwnProperty('value') && b.hasOwnProperty('value')) {\n                    return b.value - a.value;\n                }\n                if (a.hasOwnProperty('king') && !b.hasOwnProperty('king')) {\n                    return -1;\n                }\n                if (!a.hasOwnProperty('king') && b.hasOwnProperty('king')) {\n                    return 1;\n                }\n                if (a.hasOwnProperty('king') && b.hasOwnProperty('king')) {\n                    return b.king - a.king;\n                }\n            });\n        }\n      //创建card预制体\n      this.cards_nods = []\n      for(var i=0;i<data.length;i++){\n        \n        var card = cc.instantiate(this.card_prefab)\n        card.scale=0.8\n        card.parent = this.mypaiview\n        //card.x = card.width * 0.4 * (17 - 1) * (-0.5) + card.width * 0.4 * 0;\n        card.x = card.width * 0.4 * (-0.5) * (-16) + card.width * 0.4 * 0;\n        //这里实现为，每发一张牌，放在已经发的牌最后，然后整体移动\n        card.y = -250\n        card.active = false\n\n        card.getComponent(\"card\").showCards(data[i],myglobal.playerData.accountID)\n        //存储牌的信息,用于后面发牌效果\n        this.cards_nods.push(card)\n        this.card_width = card.width\n      }\n      \n      //创建3张底牌\n      this.bottom_card = []\n      for(var i=0;i<3;i++){\n        var di_card = cc.instantiate(this.card_prefab)\n        di_card.scale=0.4\n        di_card.position.x = this.bottom_card_pos_node.position.x \n\t\tdi_card.position.y=0\n        //三张牌，中间坐标就是bottom_card_pos_node节点坐标，\n        //0,和2两张牌左右移动windth*0.4\n        if(i==0){\n            \n            di_card.x = di_card.x - di_card.width*0.4\n        }else if(i==2){\n            di_card.x = di_card.x + di_card.width*0.4\n        }\n        \n\n        //di_card.x = di_card.width-i*di_card.width-20\n        //di_card.y=60\n        di_card.parent = this.bottom_card_pos_node;// this.node.getComponent(\"gameingUI\").dizhupaiview;//this.node.getComponent(\"dizhupaiview\");//  this.node.parent\n        //存储在容器里\n        this.bottom_card.push(di_card)\n      }\n\n    },\n\n    //给玩家发送三张底牌后，过1s,把牌设置到y=-250位置效果\n    schedulePushThreeCard(){\n        for(var i=0;i<this.cards_nods.length;i++){\n            var card = this.cards_nods[i]\n            if(card.y==-230){\n                card.y = -250\n            }\n        }\n    },\n    //给地主发三张排，并显示在原有牌的后面\n    pushThreeCard(){\n        //每张牌的其实位置 \n        var last_card_x =  this.cards_nods[this.cards_nods.length-1].x\n        for(var i=0;i<this.bottom_card_data.length;i++){\n            var card = cc.instantiate(this.card_prefab)\n            card.scale=0.8\n            card.parent = this.mypaiview\n          \n            card.x = last_card_x + ((i+1)*this.card_width * 0.4)\n            card.y = -230  //先把底盘放在-230，在设置个定时器下移到-250的位置\n           \n            //console.log(\"pushThreeCard x:\"+card.x)\n            card.getComponent(\"card\").showCards(this.bottom_card_data[i],myglobal.playerData.accountID)\n            card.active = true\n            this.cards_nods.push(card)\n        }\n\n        this.sortCard()\n        //设置一个定时器，在2s后，修改y坐标为-250\n        this.scheduleOnce(this.schedulePushThreeCard.bind(this),2)\n\n    },\n\n    destoryCard(accountid,choose_card){\n        if(choose_card.length==0){\n            return\n        }\n\n        /*出牌逻辑\n          1. 将选中的牌 从父节点中移除\n          2. 从this.cards_nods 数组中，删除 选中的牌 \n          3. 将 “选中的牌” 添加到出牌区域\n              3.1 清空出牌区域\n              3.2 添加子节点\n              3.3 设置scale\n              3.4 设置position\n          4.  重新设置手中的牌的位置  this.updateCards();\n        */\n        //1/2步骤删除自己手上的card节点 \n        var destroy_card = []\n        for(var i=0;i<choose_card.length;i++){\n            for(var j=0;j<this.cards_nods.length;j++){\n                var card_id = this.cards_nods[j].getComponent(\"card\").card_id\n                if(card_id==choose_card[i].cardid){\n                    console.log(\"destroy card id:\"+card_id)\n                    //this.cards_nods[j].destroy()\n                    this.cards_nods[j].removeFromParent(true);\n\t\t\t\t\t//this.cards_nods[j].destroy();\n                    destroy_card.push(this.cards_nods[j])\n                    this.cards_nods.splice(j,1)\n                }\n            }\n        }\n\n        this.appendCardsToOutZone(accountid,destroy_card)\n        this.updateCards()\n\n    },\n\n    //清除显示出牌节点全部子节点(就是把出牌的清空)\n    clearOutZone(accountid){\n        var gameScene_script = this.node.parent.getComponent(\"gameScene\")\n        var outCard_node = gameScene_script.getUserOutCardPosByAccount(accountid)\n\t\tif(outCard_node==null){return;}\n        var children = outCard_node.children;\n        for(var i=0;i<children.length;i++){\n            var card = children[i]; \n            card.destroy()\n        }\n        outCard_node.removeAllChildren(true);\n    },\n    //对出的牌做排序\n    pushCardSort(cards){\n        if(cards.length==1){\n            return\n        }\n        cards.sort(function(x,y){\n            var a = x.getComponent(\"card\").card_data;\n            var b = y.getComponent(\"card\").card_data;\n\n            if (a.hasOwnProperty('value') && b.hasOwnProperty('value')) {\n                return b.value - a.value;\n            }\n            if (a.hasOwnProperty('king') && !b.hasOwnProperty('king')) {\n                return -1;\n            }\n            if (!a.hasOwnProperty('king') && b.hasOwnProperty('king')) {\n                return 1;\n            }\n            if (a.hasOwnProperty('king') && b.hasOwnProperty('king')) {\n                return b.king - a.king;\n            }\n        })\n    },\n\n    appendOtherCardsToOutZone(outCard_node,cards,yoffset){\n       outCard_node.removeAllChildren(true);\n\n       //console.log(\"appendOtherCardsToOutZone length\"+cards.length)\n       //添加新的子节点\n       for(var i=0;i<cards.length;i++){\n           var card = cards[i]; \n           outCard_node.addChild(card,100+i) //第二个参数是zorder,保证牌不能被遮住\n       }\n\n       //对出牌进行排序\n       //设置出牌节点的坐标\n       var zPoint = cards.length / 2;\n       //console.log(\"appendOtherCardsToOutZone zeroPoint:\"+zPoint)\n       for(var i=0;i<cards.length;i++){\n        var cardNode = outCard_node.getChildren()[i]\n        var x = (i - zPoint) * 30;\n        var y = cardNode.y+yoffset; //因为每个节点需要的Y不一样，做参数传入\n        //console.log(\"-----cardNode: x:\"+x+\" y:\"+y)\n        cardNode.setScale(0.5, 0.5);                   \n        cardNode.setPosition(x,y);                     \n\n       }\n    },\n    //将 “选中的牌” 添加到出牌区域\n    //destroy_card是玩家本次出的牌\n    appendCardsToOutZone(accountid,destroy_card){\n        if(destroy_card.length==0){\n           // return\n        }\n        //先给本次出的牌做一个排序\n       this.pushCardSort(destroy_card)\n       //console.log(\"appendCardsToOutZone\")\n       var gameScene_script = this.node.parent.getComponent(\"gameScene\")\n       //获取出牌区域节点\n       var outCard_node = gameScene_script.getUserOutCardPosByAccount(accountid)\n       this.appendOtherCardsToOutZone(outCard_node,destroy_card,360)\n       //sconsole.log(\"OutZone:\"+outCard_node.name)\n\n    },\n\n    //重新排序手上的牌,并移动\n    updateCards(){\n    \n        var zeroPoint = this.cards_nods.length / 2;\n        //var last_card_x = this.cards_nods[this.cards_nods.length-1].x\n        for(var i=0;i<this.cards_nods.length;i++){\n            var cardNode = this.cards_nods[i]\n            var x = (i - zeroPoint)*(this.card_width * 0.4);\n            cardNode.setPosition(x, -250);  \n        }\n\n    },\n    \n    playPushCardSound(card_name){\n        console.log(\"playPushCardSound:\"+card_name)\n        \n        if(card_name==\"\"){\n            return\n        }\n\n        switch(card_name){\n            case CardsValue.one.name:\n                break\n            case CardsValue.double.name:\n                    if(isopen_sound){\n                        cc.audioEngine.play(cc.url.raw(\"resources/sound/duizi.mp3\")) \n                     }\n                break  \n        }\n    },\n    // update (dt) {},\n    onButtonClick(event,customData){\n\t\t\n        switch(customData){\n            case \"btn_qiandz\":\n                console.log(\"btn_qiandz\")\n                myglobal.socket.requestRobState(qian_state.qian)\n\t\t\t\tthis.unschedule(this.funUp)//清除 抢地主 定时器\n\t\t\t\t\n                this.robUI.active = false\n                if(isopen_sound){\n                    cc.audioEngine.play(cc.url.raw(\"resources/sound/woman_jiao_di_zhu.ogg\")) \n                 }\n                break\n            case \"btn_buqiandz\":\n                console.log(\"btn_buqiandz\")\n                myglobal.socket.requestRobState(qian_state.buqiang)\n\t\t\t\tthis.unschedule(this.funUp)//清除 抢地主 定时器\n\t\t\t\t\n                this.robUI.active = false\n                if(isopen_sound){\n                    cc.audioEngine.play(cc.url.raw(\"resources/sound/woman_bu_jiao.ogg\")) \n                 }\n                 break    \n             case \"nopushcard\":  //不出牌\n                 myglobal.socket.request_buchu_card([],null)\n                 this.playingUI_node.active = false\n\t\t\t\t this.unschedule(this.funUp1)// 清除 出牌定时器\n                 break\n             case \"pushcard\":   //出牌\n                 //先获取本次出牌数据\n                 if(this.choose_card_data.length==0){\n                    this.tipsLabel.string=\"请选择牌!\"\n\t\t\t\t\tthis.playingUI_node.active = true\n\t\t\t\t\t\n                    setTimeout(function(){\n                        this.tipsLabel.string=\"\"\n                    }.bind(this), 2000);\n\t\t\t\t\treturn;// 不出牌 则返回\n                 }\n\t\t\t\t this.unschedule(this.funUp1)// 清除 出牌定时器\n                 myglobal.socket.request_chu_card(this.choose_card_data,function(err,data){\n                   \n                    if(err){\n                        console.log(\"request_chu_card:\"+err)\n                        console.log(\"request_chu_card\"+JSON.stringify(data))\n                        if(this.tipsLabel.string==\"\"){\n                            this.tipsLabel.string = data.msg\n                            setTimeout(function(){\n                                this.tipsLabel.string=\"\"\n                            }.bind(this), 2000);\n                        }\n                        \n                        //出牌失败，把选择的牌归位\n                        for(var i=0;i<this.cards_nods.length;i++){\n                            var card = this.cards_nods[i]\n                            card.emit(\"reset_card_flag\")\n                        }\n                        this.choose_card_data = []\n                     }else{\n                         //出牌成功\n                         console.log(\"resp_chu_card data:\"+JSON.stringify(data))\n                         this.playingUI_node.active = false\n                         //播放出牌的声音\n                         //resp_chu_card data:{\"account\":\"2519901\",\"msg\":\"sucess\",\"cardvalue\":{\"name\":\"Double\",\"value\":1}}\n                         //{\"type\":\"other_chucard_notify\",\"result\":0,\"data\":{\"accountid\":\"2519901\",\"cards\":[{\"cardid\":24,\"card_data\":{\"index\":24,\"value\":6,\"shape\":1}},{\"cardid\":26,\"card_data\":{\"index\":26,\"value\":6,\"shape\":3}}]},\"callBackIndex\":0}\n                         this.playPushCardSound(data.cardvalue.name)\n                         this.destoryCard(data.account,this.choose_card_data)\n                         this.choose_card_data = []\n                     \n                     }\n                    \n                 }.bind(this))\n                 //this.playingUI_node.active = false\n                 break\n             case \"tipcard\":\n                 break   \n\t\t\tcase \"returnroom\"://重新连接\n\t\t\t      \n\t\t\t\t//   console.log(\"点击了 重新连接\")\n\t\t\t\t//  myglobal.socket.initSocket(function(){\n\t\t\t\t// \t  console.log(\"初始化 成功 initSocket\")\n\t\t\t\t//  myglobal.api.login(function(data){\n\t\t\t\t//    console.log(\"自动登录成功\")\n\t\t\t\t//      var gameScene_script = this.node.parent.getComponent(\"gameScene\")\n\t\t\t //         myglobal.socket.request_re_room({\"roomid\":gameScene_script.roomid},function(err,data){\n\t\t\t\t// \t  //重新连接\n\t\t\t\t// \t\t if(err==0){\n\t\t\t\t// \t\t this.returnroom.active=false;\n\t\t\t\t// \t\t console.log(\"重新进入房间 成功\"+JSON.stringify(data));\n\t\t\t\t\t\t \n\t\t\t\t// \t\t }else{\n\t\t\t\t// \t\t\t console.log(\"重新进入房间 失败\"+err);\n\n\t\t\t\t// \t\t }\n\t\t\t\t//      }.bind(this))\n\t\t\t\t\n\t\t\t\t//   }.bind(this))\n\t\t\t\t//   }.bind(this));\n\t\t\t\t \n\t\t\t\t break \t\t  \n            default:\n                break\n        }\n    }\n\n\n});\n"]}