{"version":3,"sources":["assets/scripts/gameScene/gamebeforeUI.js"],"names":["cc","Class","Component","properties","btn_ready","Node","btn_gamestart","onLoad","active","node","on","console","log","myglobal","playerData","housemanageid","accountID","bind","socket","onGameStart","onChangeHouseManage","data","JSON","stringify","start","onButtonClick","event","customData","requestReady","requestStart","err","Toast","show"],"mappings":"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","sourceRoot":"/","sourcesContent":["import myglobal from \"../mygolbal.js\"\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btn_ready:cc.Node,\n        btn_gamestart:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n\n        this.btn_gamestart.active = false\n        this.btn_ready.active = false\n\n        //监听本地的发送的消息\n        this.node.on(\"init\",function(){\n            console.log(\"game beforeui init\")\n            console.log(\"myglobal.playerData.housemanageid\"+myglobal.playerData.housemanageid)\n            console.log(\"myglobal.playerData.accountID\"+myglobal.playerData.accountID)\n            if(myglobal.playerData.housemanageid==myglobal.playerData.accountID){\n                //自己就是房主\n                this.btn_gamestart.active = true\n                this.btn_ready.active = false\n            }else{\n                this.btn_gamestart.active = false\n                this.btn_ready.active = true\n            }\n        }.bind(this))\n\n        //监听服务器发送来的消息\n        myglobal.socket.onGameStart(function(){\n            console.log(\"gamebrforeUI onGameStart revice\")\n            this.node.active = false\n        }.bind(this))\n\n        myglobal.socket.onChangeHouseManage(function(data){\n            console.log(\"gamebrforeUI onChangeHouseManage revice\"+JSON.stringify(data))\n            myglobal.playerData.housemanageid = data\n            if(myglobal.playerData.housemanageid==myglobal.playerData.accountID){\n                //自己就是房主\n                this.btn_gamestart.active = true\n                this.btn_ready.active = false\n            }else{\n                this.btn_gamestart.active = false\n                this.btn_ready.active = true\n            }\n\n        }.bind(this))\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n    \n    onButtonClick(event,customData){\n        switch(customData){\n            case \"btn_ready\":\n                console.log(\"btn_ready\")\n                myglobal.socket.requestReady()\n                break\n            case \"btn_start\":\n                // if(isopen_sound){\n                //    cc.audioEngine.play(cc.url.raw(\"resources/sound/start_a.ogg\")) \n                //  }\n                 console.log(\"btn_start\")\n                 myglobal.socket.requestStart(function(err,data){\n                    if(err!=0){\n                        console.log(\"requestStart err\"+err)\n\t\t\t\t\t\tToast.show(data);\n                    }else{\n                        console.log(\"requestStart data\"+ JSON.stringify(data))\n                        \n                    }\n                 })\n                 break    \n            default:\n                break\n        }\n    }\n});\n"]}