{"version":3,"sources":["assets/scripts/util/api.js"],"names":["api","that","login","callback","localStorage","getItem","myglobal","playerData","accountID","setItem","socket","request_wxLogin","uniqueID","nickName","avatarUrl","err","result","console","log","JSON","stringify","gobal_count","gold_count","unique_id","account_id","nick_name","avatar_url","fkcount","bind"],"mappings":";;;;;;;;;;;AAAA;;;;AAEA,IAAMA,GAAG,GAAC,SAAJA,GAAI,GAAU;AACnB,MAAIC,IAAI,GAAC,EAAT;;AACGA,EAAAA,IAAI,CAACC,KAAL,GAAW,UAASC,QAAT,EAAkB;AAC/B,QAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,KAAmC,IAAtC,EAA2C;AAC1CC,2BAASC,UAAT,CAAoBC,SAApB,GAA8BJ,YAAY,CAACC,OAAb,CAAqB,WAArB,CAA9B;AACA;;AACDD,IAAAA,YAAY,CAACK,OAAb,CAAqB,WAArB,EAAiCH,qBAASC,UAAT,CAAoBC,SAArD;;AACAF,yBAASI,MAAT,CAAgBC,eAAhB,CAAgC;AAC5BC,MAAAA,QAAQ,EAACN,qBAASC,UAAT,CAAoBK,QADD;AAE5BJ,MAAAA,SAAS,EAACF,qBAASC,UAAT,CAAoBC,SAFF;AAG5BK,MAAAA,QAAQ,EAACP,qBAASC,UAAT,CAAoBM,QAHD;AAI5BC,MAAAA,SAAS,EAACR,qBAASC,UAAT,CAAoBO;AAJF,KAAhC,EAKE,UAASC,GAAT,EAAaC,MAAb,EAAoB;AAClB;AACA;AACA;AACA,UAAGD,GAAG,IAAE,CAAR,EAAU;AACPE,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAOH,GAAnB;AACA;AACF;;AAEDE,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiBC,IAAI,CAACC,SAAL,CAAeJ,MAAf,CAA7B;AACAV,2BAASC,UAAT,CAAoBc,WAApB,GAAkCL,MAAM,CAACM,UAAzC;AACFhB,2BAASC,UAAT,CAAoBK,QAApB,GAA6BI,MAAM,CAACO,SAApC;AACAjB,2BAASC,UAAT,CAAoBC,SAApB,GAA8BQ,MAAM,CAACQ,UAArC;AACAlB,2BAASC,UAAT,CAAoBM,QAApB,GAA6BG,MAAM,CAACS,SAApC;AACAnB,2BAASC,UAAT,CAAoBO,SAApB,GAA8BE,MAAM,CAACU,UAArC;AACApB,2BAASC,UAAT,CAAoBoB,OAApB,GAA4BX,MAAM,CAACW,OAAnC;;AACE,UAAGxB,QAAH,EAAY;AACdA,QAAAA,QAAQ,CAACa,MAAD,CAAR;AACA;AACD,KAnBC,CAmBAY,IAnBA,CAmBK,IAnBL,CALF;AAyBA,GA9BE;;AA+BH,SAAO3B,IAAP;AACA,CAlCD;;eAoCeD","sourceRoot":"/","sourcesContent":["import myglobal from \"../mygolbal.js\"\n\nconst api=function(){\n\tvar that={}\n    that.login=function(callback){\n\t\tif(localStorage.getItem(\"accountID\")!=null){\n\t\t\tmyglobal.playerData.accountID=localStorage.getItem(\"accountID\");\n\t\t}\n\t\tlocalStorage.setItem(\"accountID\",myglobal.playerData.accountID);\n\t\tmyglobal.socket.request_wxLogin({\n\t\t    uniqueID:myglobal.playerData.uniqueID,\n\t\t    accountID:myglobal.playerData.accountID,\n\t\t    nickName:myglobal.playerData.nickName,\n\t\t    avatarUrl:myglobal.playerData.avatarUrl,\n\t\t},function(err,result){\n\t\t    //请求返回\n\t\t    //先隐藏等待UI\n\t\t    //this.wait_node.active = false\n\t\t    if(err!=0){\n\t\t       console.log(\"err:\"+err)\n\t\t       return     \n\t\t    }\n\t\t\n\t\t    console.log(\"login sucess\" + JSON.stringify(result))\n\t\t    myglobal.playerData.gobal_count = result.gold_count\n\t\t\t myglobal.playerData.uniqueID=result.unique_id\n\t\t\t myglobal.playerData.accountID=result.account_id;\n\t\t\t myglobal.playerData.nickName=result.nick_name;\n\t\t\t myglobal.playerData.avatarUrl=result.avatar_url;\n\t\t\t myglobal.playerData.fkcount=result.fkcount;\n\t\t    if(callback){\n\t\t\t\tcallback(result);\n\t\t\t}\n\t\t}.bind(this))\n\t}\n\treturn that\n}\n\t\nexport default api;\n\t\n\t"]}