{"version":3,"sources":["assets/scripts/hallscene/prefabs_script/creatRoom.js"],"names":["cc","Class","Component","properties","start","_createroom","level","callback","console","log","room_para","myglobal","socket","request_creatroom","err","result","JSON","stringify","playerData","bottom","rate","director","loadScene","onButtonClick","event","customData","node","destroy","Toast","show","bind"],"mappings":";;;;;;AAAA;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,EAHP;AAOL;AAEA;AAEAC,EAAAA,KAXK,mBAWI,CAER,CAbI;AAeLC,EAAAA,WAfK,uBAeOC,KAfP,EAeaC,QAfb,EAesB;AACvB,QAAGD,KAAK,GAAC,CAAN,IAAWA,KAAK,GAAC,CAApB,EAAsB;AAC3BC,MAAAA,QAAQ,CAAC,4BAA2BD,KAA5B,CAAR;AACSE,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAA2BH,KAAvC;AACA;AACH,KALsB,CAOvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,QAAII,SAAS,GAAG;AACT;AACCJ,MAAAA,KAAK,EAACA;AAFE,KAAhB,CAlBuB,CAsBf;;AAEAK,yBAASC,MAAT,CAAgBC,iBAAhB,CAAkCH,SAAlC,EAA4C,UAASI,GAAT,EAAaC,MAAb,EAAoB;AAC5D,UAAID,GAAG,IAAE,CAAT,EAAW;AACPN,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAmBK,GAA/B;AAClBP,QAAAA,QAAQ,CAACO,GAAD,EAAKC,MAAL,CAAR;AACe,OAHD,MAGK;AACDP,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBO,IAAI,CAACC,SAAL,CAAeF,MAAf,CAA5B,EADC,CAED;;AACAJ,6BAASO,UAAT,CAAoBC,MAApB,GAA6BJ,MAAM,CAACI,MAApC;AACAR,6BAASO,UAAT,CAAoBE,IAApB,GAA2BL,MAAM,CAACK,IAAlC;AACApB,QAAAA,EAAE,CAACqB,QAAH,CAAYC,SAAZ,CAAsB,WAAtB;AAClBf,QAAAA,QAAQ,CAAC,CAAD,CAAR;AACe;AAEJ,KAbD;AAcX,GArDI;AAuDL;AACAgB,EAAAA,aAxDK,yBAwDSC,KAxDT,EAwDeC,UAxDf,EAwD0B;AACjC,QAAIlB,QAAQ,GAAC,UAASO,GAAT,EAAaC,MAAb,EAAoB;AAAC;AAChC,UAAGD,GAAG,IAAE,CAAR,EAAU;AACT,aAAKY,IAAL,CAAUC,OAAV;AACA,OAFD,MAEK;AACJC,QAAAA,KAAK,CAACC,IAAN,CAAWd,MAAX;AACA,OAL8B,CAO/B;;AACD,KARY,CAQXe,IARW,CAQN,IARM,CAAb;;AASM,YAAOL,UAAP;AACI,WAAK,eAAL;AACM,aAAKpB,WAAL,CAAiB,CAAjB,EAAmBE,QAAnB;;AACA;;AACN,WAAK,eAAL;AACM,aAAKF,WAAL,CAAiB,CAAjB,EAAmBE,QAAnB;;AACA;;AACN,WAAK,eAAL;AACM,aAAKF,WAAL,CAAiB,CAAjB,EAAmBE,QAAnB;;AACA;;AACN,WAAK,eAAL;AACM,aAAKF,WAAL,CAAiB,CAAjB,EAAmBE,QAAnB;;AACA;;AACN,WAAK,mBAAL;AACM,aAAKmB,IAAL,CAAUC,OAAV;AACF;;AACJ;AACI;AAjBR,KAV2B,CA6B5B;;AAEF;AAvFI,CAAT","sourceRoot":"/","sourcesContent":["import myglobal from \"../../mygolbal.js\"\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n     \n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n\n    _createroom(level,callback){\n        if(level<0 || level>4){\n\t\t\tcallback(\"create room level error\"+ level)\n            console.log(\"create room level error\"+ level)\n            return\n        }\n\n        // var global = 0\n        // if (rate==1){\n        //     global = 10\n        // }else if(rate==2){\n        //     global = 20\n        // }else if(rate==3){\n        //     global = 30\n        // }else if(rate==4){\n        //     global = 40\n        // }\n\n        var room_para = {\n               // global:global,\n                level:level\n                }\n                //播放一个等待动画\n\t\t\t\t\n                myglobal.socket.request_creatroom(room_para,function(err,result){\n                    if (err!=0){\n                        console.log(\"create_room err:\"+err)\n\t\t\t\t\t\tcallback(err,result)\n                    }else{\n                        console.log(\"create_room\" + JSON.stringify(result))\n                        //网络数据包\n                        myglobal.playerData.bottom = result.bottom\n                        myglobal.playerData.rate = result.rate\n                        cc.director.loadScene(\"gameScene\")\n\t\t\t\t\t\tcallback(0)\n                    }\n\n                })\n    },\n\n    // update (dt) {},\n    onButtonClick(event,customData){\n\t\tvar callback=function(err,result){//\n\t\t\t if(err==0){\n\t\t\t  this.node.destroy()\n\t\t\t }else{\n\t\t\t\t Toast.show(result);\n\t\t\t }\n\t\t\t \n\t\t\t //\n\t\t}.bind(this)\n        switch(customData){\n            case \"create_room_1\":\n                  this._createroom(1,callback)\n                  break\n            case \"create_room_2\":\n                  this._createroom(2,callback)\n                  break\n            case \"create_room_3\":\n                  this._createroom(3,callback)\n                  break\n            case \"create_room_4\":\n                  this._createroom(4,callback)\n                  break\n            case \"create_room_close\":\n                  this.node.destroy() \n                break       \n            default:\n                break\n        }\n       // this.node.destroy() \n\n    }\n\n});\n"]}